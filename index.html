<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Health CV Demo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Modern professional font -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <style>
      :root {
        font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont,
          "Segoe UI", sans-serif;
        color: #020617;
        background-color: #e5e7eb;
      }

      body {
        margin: 0;
        padding: 32px 24px;
        display: flex;
        justify-content: center;
      }

      .page {
        max-width: 1120px;
        width: 100%;
        display: flex;
        flex-direction: column;
        gap: 24px;
      }

      .hero {
        display: flex;
        flex-direction: column;
        gap: 8px;
        margin-bottom: 4px;
      }

      .hero-title {
        font-size: 26px;
        font-weight: 650;
        letter-spacing: -0.02em;
      }

      .hero-sub {
        font-size: 14px;
        color: #6b7280;
        max-width: 540px;
      }

      .steps {
        display: flex;
        gap: 10px;
        font-size: 12px;
        color: #6b7280;
        margin-top: 4px;
        flex-wrap: wrap;
      }

      .step-pill {
        padding: 4px 10px;
        border-radius: 999px;
        background: #f9fafb;
        border: 1px solid #e5e7eb;
      }

      .cards {
        display: grid;
        grid-template-columns: minmax(0, 1.1fr) minmax(0, 0.9fr);
        gap: 20px;
      }

      @media (max-width: 900px) {
        body {
          padding: 20px 16px;
        }
        .cards {
          grid-template-columns: minmax(0, 1fr);
        }
      }

      @media (max-width: 600px) {
        body {
          padding: 16px 12px;
        }
        .hero-title {
          font-size: 22px;
        }
      }

      .card {
        background: #f9fafb;
        border-radius: 22px;
        padding: 24px 24px;
        box-shadow: 0 18px 40px rgba(15, 23, 42, 0.06);
        border: 1px solid #e5e7eb;
      }

      h2 {
        margin: 0 0 4px;
        font-size: 17px;
      }

      .sub {
        font-size: 12px;
        color: #6b7280;
        margin-bottom: 18px;
      }

      label {
        font-size: 13px;
        font-weight: 600;
        color: #374151;
        display: block;
        margin-bottom: 4px;
      }

      input[type="text"],
      textarea {
        width: 100%;
        border-radius: 12px;
        border: 1px solid #e5e7eb;
        padding: 8px 10px;
        font-size: 13px;
        resize: vertical;
        min-height: 36px;
        background: #ffffff;
      }

      textarea {
        min-height: 60px;
      }

      .field {
        margin-bottom: 18px;
      }

      .field-row {
        display: flex;
        gap: 16px;
      }

      .field-row .field {
        flex: 1;
      }

      @media (max-width: 700px) {
        .field-row {
          flex-direction: column;
        }
      }

      .hint {
        font-size: 11px;
        color: #9ca3af;
        margin-top: 3px;
      }

      .button {
        margin-top: 12px;
        padding: 9px 18px;
        border-radius: 999px;
        border: none;
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
        background: #0f172a;
        color: #f9fafb;
        box-shadow: 0 10px 25px rgba(15, 23, 42, 0.25);
      }

      .button.secondary {
        background: #e5e7eb;
        color: #111827;
        box-shadow: none;
        margin-top: 16px;
      }

      .cv-header {
        display: flex;
        justify-content: space-between;
        align-items: baseline;
        gap: 12px;
        flex-wrap: wrap;
      }

      .cv-name {
        font-size: 18px;
        font-weight: 600;
      }

      .cv-meta {
        font-size: 11px;
        color: #6b7280;
      }

      .cv-section-title {
        font-size: 13px;
        font-weight: 600;
        margin-top: 14px;
        margin-bottom: 6px;
      }

      .chip {
        display: inline-flex;
        padding: 3px 10px;
        border-radius: 999px;
        background: #e0f2fe;
        font-size: 11px;
        color: #0369a1;
        border: 1px solid #bae6fd;
      }

      .pill {
        display: inline-flex;
        align-items: center;
        gap: 4px;
        padding: 4px 10px;
        border-radius: 999px;
        border: 1px solid #e5e7eb;
        font-size: 12px;
        cursor: pointer;
        background: #ffffff;
        margin: 3px 5px 5px 0;
        transition: 0.12s;
      }

      .pill span.term {
        text-decoration: underline;
        text-decoration-style: dotted;
        text-underline-offset: 2px;
      }

      .pill:hover {
        background: #eff6ff;
        box-shadow: 0 6px 14px rgba(37, 99, 235, 0.12);
        transform: translateY(-1px);
      }

      .cv-row {
        font-size: 13px;
        margin-bottom: 5px;
      }

      .quote-box {
        font-size: 13px;
        background: #ffffff;
        border-radius: 14px;
        padding: 10px 12px;
        margin-top: 6px;
        border: 1px dashed #e5e7eb;
      }

      .files-list {
        font-size: 12px;
        color: #4b5563;
      }

      .file-pill {
        display: inline-flex;
        padding: 3px 8px;
        border-radius: 999px;
        background: #f3f4f6;
        border: 1px solid #e5e7eb;
        margin: 3px 6px 3px 0;
      }

      .file-input {
        width: 100%;
        font-size: 12px;
      }

      .edu-panel {
        position: fixed;
        right: 24px;
        bottom: 24px;
        max-width: 320px;
        background: #ffffff;
        border-radius: 18px;
        box-shadow: 0 22px 55px rgba(15, 23, 42, 0.28);
        padding: 16px 18px 14px;
        display: none;
        border: 1px solid #e5e7eb;
      }

      .edu-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 6px;
      }

      .edu-chip {
        font-size: 11px;
        padding: 2px 8px;
        border-radius: 999px;
        background: #eff6ff;
        color: #1d4ed8;
      }

      .edu-title {
        font-size: 13px;
        font-weight: 600;
        margin-bottom: 4px;
      }

      .edu-body {
        font-size: 13px;
        color: #4b5563;
        margin-bottom: 10px;
      }

      .edu-close {
        border: none;
        background: none;
        color: #6b7280;
        font-size: 12px;
        cursor: pointer;
      }

      .edu-term-label {
        font-size: 11px;
        color: #9ca3af;
        margin-bottom: 4px;
      }
    </style>
  </head>

  <body>
    <div class="page">
      <div class="hero">
        <div class="hero-title">Health CV (Demo)</div>
        <div class="hero-sub">
          A simple way for patients to capture their story once and share it
          anywhere. Fill in your details, then see the 1-page CV a doctor would
          read.
        </div>

        <div class="steps">
          <div class="step-pill">Step 1 · Enter your information</div>
          <div class="step-pill">Step 2 · Review your Health CV</div>
          <div class="step-pill">
            Step 3 · Click items for plain-language info
          </div>
        </div>
      </div>

      <div class="cards">
        <div class="card" id="intakeCard">
          <h2>Step 1 · Tell us about your health</h2>
          <div class="sub">
            You can use a real example or a made-up one. No data is saved in
            this demo.
          </div>

          <div class="field">
            <label>Full name (optional)</label>
            <input type="text" id="nameInput" placeholder="Sam Smith" />
          </div>

          <div class="field-row">
            <div class="field">
              <label>Blood pressure readings</label>
              <textarea
                id="bpInput"
                placeholder="One per line, e.g.&#10;122/76&#10;128/82&#10;118/74"
              ></textarea>
              <div class="hint">
                Multiple readings are best. We’ll calculate an average.
              </div>
            </div>

            <div class="field">
              <label>Heart rate (beats per minute)</label>
              <input type="text" id="hrInput" placeholder="e.g. 72" />
              <div class="hint">Your usual resting heart rate.</div>
            </div>
          </div>

          <div class="field-row">
            <div class="field">
              <label>Weight</label>
              <input
                type="text"
                id="weightInput"
                placeholder="e.g. 80 kg or 175 lb"
              />
            </div>

            <div class="field">
              <label>Height</label>
              <input
                type="text"
                id="heightInput"
                placeholder="e.g. 170 cm or 5'7&quot;"
              />
            </div>
          </div>

          <div class="field">
            <label>Problem list</label>
            <textarea
              id="problemsInput"
              placeholder="One per line, e.g.&#10;Hypertension&#10;Type 2 diabetes&#10;Generalized anxiety"
            ></textarea>
            <div class="hint">Your ongoing medical conditions.</div>
          </div>

          <div class="field">
            <label>Current medications (with dose &amp; frequency)</label>
            <textarea
              id="currentMedsInput"
              placeholder="One per line, e.g.&#10;Metformin 500 mg twice daily&#10;Olmesartan 20 mg daily"
            ></textarea>
          </div>

          <div class="field">
            <label>Medications tried in the past (and why stopped)</label>
            <textarea
              id="pastMedsInput"
              placeholder="One per line, e.g.&#10;Lisinopril – cough&#10;Wellbutrin – nausea"
            ></textarea>
          </div>

          <div class="field">
            <label>Allergies</label>
            <textarea
              id="allergiesInput"
              placeholder="e.g. Penicillin – rash&#10;No known drug allergies"
            ></textarea>
          </div>

          <div class="field-row">
            <div class="field">
              <label>Important lab results</label>
              <textarea
                id="labsInput"
                placeholder="One per line, e.g.&#10;A1c 6.7% (2025)&#10;LDL 115, HDL 32, Total 215"
              ></textarea>
            </div>

            <div class="field">
              <label>Imaging or procedures</label>
              <textarea
                id="imagingInput"
                placeholder="One per line, e.g.&#10;CT abdomen (2015) – inflamed gallbladder"
              ></textarea>
            </div>
          </div>

          <div class="field">
            <label>Social history (optional)</label>
            <textarea
              id="socialInput"
              placeholder="Lives with partner, walks daily, drinks wine occasionally, never smoked."
            ></textarea>
          </div>

          <div class="field">
            <label>What’s important to me</label>
            <textarea
              id="importantInput"
              placeholder="My goal is to stay active and avoid unnecessary medications."
            ></textarea>
          </div>

          <div class="field">
            <label>Attach files (optional)</label>
            <input
              type="file"
              id="fileInput"
              class="file-input"
              multiple
              accept=".pdf,.jpg,.jpeg,.png,.doc,.docx"
            />
          </div>

          <button class="button" id="generateBtn">
            Create my Health CV
          </button>
        </div>

        <div class="card" id="cvCard" style="display:none">
          <div class="cv-header">
            <div>
              <div class="cv-name" id="cvName">Health CV</div>
              <div class="cv-meta">
                Preview of what a clinician would see, based on your inputs.
              </div>
            </div>
            <div class="chip">Click items for explanations</div>
          </div>

          <div class="cv-section">
            <div class="cv-section-title">Baseline vitals</div>
            <div class="cv-row" id="cvVitalsBp"></div>
            <div class="cv-row" id="cvVitalsHr"></div>
            <div class="cv-row" id="cvVitalsWt"></div>
            <div class="cv-row" id="cvVitalsHt"></div>
          </div>

          <div class="cv-section">
            <div class="cv-section-title">Active problems</div>
            <div id="cvProblems"></div>
          </div>

          <div class="cv-section">
            <div class="cv-section-title">Current medications</div>
            <div id="cvCurrentMeds"></div>
          </div>

          <div class="cv-section">
            <div class="cv-section-title">
              Medications tried in the past
            </div>
            <div id="cvPastMeds"></div>
          </div>

          <div class="cv-section">
            <div class="cv-section-title">Allergies</div>
            <div id="cvAllergies"></div>
          </div>

          <div class="cv-section">
            <div class="cv-section-title">Key labs</div>
            <div id="cvLabs"></div>
          </div>

          <div class="cv-section">
            <div class="cv-section-title">Imaging &amp; procedures</div>
            <div id="cvImaging"></div>
          </div>

          <div class="cv-section">
            <div class="cv-section-title">Social history</div>
            <div class="cv-row" id="cvSocial"></div>
          </div>

          <div class="cv-section">
            <div class="cv-section-title">What’s important to me</div>
            <div class="quote-box" id="cvImportant"></div>
          </div>

          <div class="cv-section">
            <div class="cv-section-title">Files attached</div>
            <div class="files-list" id="cvFiles"></div>
          </div>

          <button class="button secondary" id="editBtn">
            Back to edit
          </button>
        </div>
      </div>
    </div>

    <div class="edu-panel" id="eduPanel">
      <div class="edu-header">
        <div class="edu-chip">Health CV Assistant</div>
        <button class="edu-close" id="eduClose">Close</button>
      </div>
      <div class="edu-term-label" id="eduTermLabel"></div>
      <div class="edu-title" id="eduTitle"></div>
      <div class="edu-body" id="eduBody"></div>
    </div>

    <script>
      const glossary = {
        hypertension: {
          title: "Hypertension (High Blood Pressure)",
          body:
            "High blood pressure means the force of blood pushing against your arteries is consistently too high. Over time this can strain the heart, brain and kidneys."
        },
        metformin: {
          title: "Metformin",
          body:
            "Metformin lowers blood sugar by helping your body use insulin better and reducing sugar made by the liver."
        }
      };

      function lines(v) {
        return v.split("\n").map(x => x.trim()).filter(Boolean);
      }

      function computeBpAverage(v) {
        const arr = lines(v);
        let s = 0, d = 0, c = 0;
        arr.forEach(l => {
          const m = l.match(/(\d+)\s*\/\s*(\d+)/);
          if (m) { s += +m[1]; d += +m[2]; c++; }
        });
        if (!c) return null;
        return { systolic: Math.round(s/c), diastolic: Math.round(d/c), count:c };
      }

      function makePill(text) {
        const pill = document.createElement("button");
        pill.className = "pill";
        pill.textContent = text;

        pill.onclick = () => {
          const key = text.toLowerCase();
          if (glossary[key]) showTerm(key, text);
          else showGeneric(text);
        };
        return pill;
      }

      const bpInput = bpInput;
    </script>
  </body>
</html>
